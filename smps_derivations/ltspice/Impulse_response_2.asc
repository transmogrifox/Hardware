Version 4
SHEET 1 4228 7336
WIRE -1056 448 -1152 448
WIRE -544 448 -1056 448
WIRE -400 448 -544 448
WIRE -544 544 -544 448
WIRE -592 560 -672 560
WIRE -400 560 -400 448
WIRE -672 592 -672 560
WIRE -592 608 -624 608
WIRE -1152 640 -1152 448
WIRE -816 688 -896 688
WIRE -736 688 -816 688
WIRE -624 688 -624 608
WIRE -624 688 -736 688
WIRE -544 688 -544 624
WIRE -400 688 -400 624
WIRE -400 688 -544 688
WIRE -336 688 -400 688
WIRE -32 688 -256 688
WIRE 96 688 -32 688
WIRE 112 688 96 688
WIRE 320 688 112 688
WIRE -816 752 -816 688
WIRE -736 752 -736 688
WIRE -896 768 -896 688
WIRE -544 768 -544 688
WIRE -32 768 -32 688
WIRE 112 768 112 688
WIRE 320 768 320 688
WIRE -624 784 -624 688
WIRE -592 784 -624 784
WIRE -400 800 -400 688
WIRE 1280 816 1216 816
WIRE 1456 816 1344 816
WIRE 1536 816 1456 816
WIRE 1600 816 1536 816
WIRE -592 832 -672 832
WIRE -672 864 -672 832
WIRE 1456 912 1456 816
WIRE 1600 912 1600 816
WIRE -896 928 -896 848
WIRE -816 928 -816 832
WIRE -816 928 -896 928
WIRE -736 928 -736 816
WIRE -736 928 -816 928
WIRE -544 928 -544 848
WIRE -544 928 -736 928
WIRE -400 928 -400 864
WIRE -400 928 -544 928
WIRE -32 928 -32 832
WIRE -32 928 -400 928
WIRE 112 928 112 848
WIRE 112 928 -32 928
WIRE 320 928 320 848
WIRE 320 928 112 928
WIRE -1152 976 -1152 720
WIRE -544 976 -544 928
WIRE 1456 1072 1456 976
WIRE 1600 1072 1600 992
WIRE 1600 1072 1456 1072
WIRE 1600 1120 1600 1072
WIRE -800 1184 -944 1184
WIRE -720 1184 -800 1184
WIRE -576 1184 -720 1184
WIRE -720 1200 -720 1184
WIRE 1040 1216 880 1216
WIRE 1200 1216 1040 1216
WIRE 1200 1232 1200 1216
WIRE 880 1248 880 1216
WIRE -944 1280 -944 1184
WIRE -800 1280 -800 1184
WIRE 1040 1296 1040 1216
WIRE -720 1312 -720 1280
WIRE -576 1312 -720 1312
WIRE -304 1312 -384 1312
WIRE -272 1312 -304 1312
WIRE -192 1312 -272 1312
WIRE -16 1312 -80 1312
WIRE 64 1312 -16 1312
WIRE 80 1312 64 1312
WIRE 256 1312 80 1312
WIRE -720 1344 -720 1312
WIRE -16 1344 -16 1312
WIRE 832 1344 608 1344
WIRE 960 1344 832 1344
WIRE 1200 1344 1200 1312
WIRE 1200 1344 1120 1344
WIRE 1280 1344 1200 1344
WIRE 1744 1344 1424 1344
WIRE 1776 1344 1744 1344
WIRE -384 1360 -384 1312
WIRE -272 1360 -272 1312
WIRE 80 1360 80 1312
WIRE 256 1360 256 1312
WIRE -192 1376 -192 1312
WIRE -80 1376 -80 1312
WIRE 960 1392 896 1392
WIRE 1776 1392 1776 1344
WIRE 1424 1424 1424 1344
WIRE 608 1440 608 1344
WIRE 960 1456 960 1440
WIRE -720 1472 -720 1424
WIRE -384 1488 -384 1440
WIRE -384 1488 -416 1488
WIRE -272 1488 -272 1440
WIRE -272 1488 -384 1488
WIRE -192 1488 -192 1440
WIRE -192 1488 -272 1488
WIRE -80 1488 -80 1440
WIRE -80 1488 -192 1488
WIRE -16 1488 -16 1424
WIRE -16 1488 -80 1488
WIRE 80 1488 80 1440
WIRE 80 1488 -16 1488
WIRE 256 1488 256 1440
WIRE 256 1488 80 1488
WIRE -416 1504 -416 1488
WIRE 1776 1520 1776 1472
WIRE 768 1536 688 1536
WIRE 896 1536 896 1392
WIRE 896 1536 768 1536
WIRE 1040 1552 1040 1440
WIRE 1056 1552 1040 1552
WIRE 1200 1552 1056 1552
WIRE 1424 1552 1424 1488
WIRE 1424 1552 1200 1552
WIRE 1472 1552 1424 1552
WIRE 1632 1552 1552 1552
WIRE 688 1584 688 1536
WIRE 1056 1584 1056 1552
WIRE 1424 1584 1424 1552
WIRE -944 1600 -944 1360
WIRE -800 1600 -800 1360
WIRE -800 1600 -944 1600
WIRE -720 1600 -720 1552
WIRE -720 1600 -800 1600
WIRE 896 1600 896 1536
WIRE -944 1616 -944 1600
WIRE 768 1616 768 1536
WIRE 608 1760 608 1520
WIRE 688 1760 688 1664
WIRE 688 1760 608 1760
WIRE 768 1760 768 1680
WIRE 768 1760 688 1760
WIRE 896 1760 896 1680
WIRE 896 1760 768 1760
WIRE 1056 1760 1056 1648
WIRE 1056 1760 896 1760
WIRE 1264 1760 1184 1760
WIRE 1424 1760 1424 1648
WIRE 1424 1760 1344 1760
WIRE 896 1792 896 1760
WIRE 1424 1792 1424 1760
WIRE 1424 1936 1424 1872
WIRE -880 2672 -960 2672
WIRE -544 2672 -624 2672
WIRE -208 2672 -288 2672
WIRE -960 2736 -960 2672
WIRE -624 2736 -624 2672
WIRE -288 2736 -288 2672
WIRE -960 2880 -960 2816
WIRE -624 2880 -624 2816
WIRE -288 2880 -288 2816
WIRE -1424 3056 -1504 3056
WIRE -880 3056 -960 3056
WIRE -48 3056 -128 3056
WIRE 352 3056 272 3056
WIRE 736 3056 656 3056
WIRE -1504 3120 -1504 3056
WIRE -960 3120 -960 3056
WIRE -128 3120 -128 3056
WIRE 272 3120 272 3056
WIRE 656 3120 656 3056
WIRE -1504 3264 -1504 3200
WIRE -960 3264 -960 3200
WIRE -128 3264 -128 3200
WIRE 272 3264 272 3200
WIRE 656 3264 656 3200
WIRE -1584 3920 -1664 3920
WIRE -1408 3920 -1520 3920
WIRE -1328 3920 -1408 3920
WIRE -1408 4000 -1408 3920
WIRE -1664 4080 -1664 3920
WIRE -1408 4096 -1408 4080
WIRE -1664 4224 -1664 4160
WIRE -1408 4224 -1408 4176
WIRE -1408 4224 -1664 4224
WIRE -1408 4240 -1408 4224
WIRE -928 4528 -1008 4528
WIRE -240 4528 -320 4528
WIRE -1008 4592 -1008 4528
WIRE -320 4592 -320 4528
WIRE -1008 4736 -1008 4672
WIRE -320 4736 -320 4672
WIRE -944 4800 -1024 4800
WIRE -256 4800 -336 4800
WIRE -1024 4864 -1024 4800
WIRE -336 4864 -336 4800
WIRE -1024 5008 -1024 4944
WIRE -336 5008 -336 4944
WIRE -944 5104 -1024 5104
WIRE -256 5104 -336 5104
WIRE -1024 5168 -1024 5104
WIRE -336 5168 -336 5104
WIRE -1024 5312 -1024 5248
WIRE -336 5312 -336 5248
WIRE -944 5520 -1024 5520
WIRE -256 5520 -336 5520
WIRE -1024 5584 -1024 5520
WIRE -336 5584 -336 5520
WIRE -1024 5728 -1024 5664
WIRE -336 5728 -336 5664
WIRE -960 5792 -1040 5792
WIRE -272 5792 -352 5792
WIRE -1040 5856 -1040 5792
WIRE -352 5856 -352 5792
WIRE -1040 6000 -1040 5936
WIRE -352 6000 -352 5936
WIRE -960 6096 -1040 6096
WIRE -272 6096 -352 6096
WIRE -1040 6160 -1040 6096
WIRE -352 6160 -352 6096
WIRE -1040 6304 -1040 6240
WIRE -352 6304 -352 6240
WIRE -928 6960 -1072 6960
WIRE -528 6960 -848 6960
WIRE -256 6960 -528 6960
WIRE -128 6960 -256 6960
WIRE -112 6960 -128 6960
WIRE 80 6960 -112 6960
WIRE -256 7040 -256 6960
WIRE -112 7040 -112 6960
WIRE 80 7040 80 6960
WIRE -528 7056 -528 6960
WIRE -528 7200 -528 7136
WIRE -256 7200 -256 7104
WIRE -256 7200 -528 7200
WIRE -112 7200 -112 7120
WIRE -112 7200 -256 7200
WIRE 80 7200 80 7120
WIRE 80 7200 -112 7200
WIRE -112 7248 -112 7200
FLAG -1152 976 0
FLAG -672 592 0
FLAG -544 976 0
FLAG -672 864 0
FLAG 96 688 Vout
FLAG -1056 448 Vi
FLAG -416 1504 0
FLAG 64 1312 CS
FLAG -576 1184 vth
FLAG -304 1312 CMP
FLAG 960 1456 0
FLAG 896 1792 0
FLAG 880 1248 0
FLAG 1632 1552 CMP
FLAG 1424 1936 0
FLAG 1200 1552 clr
FLAG 896 1392 clk
FLAG 1280 1344 GD
FLAG 832 1344 1V
FLAG 1184 1760 1V
FLAG 1776 1520 0
FLAG 1744 1344 osc
FLAG -944 1616 0
FLAG 1600 1120 0
FLAG 1536 816 mcomp
FLAG 1216 816 GD
FLAG -960 3264 0
FLAG -880 3056 iv0
FLAG -128 3264 0
FLAG -48 3056 iv1
FLAG -576 1312 icn_
FLAG -960 2880 0
FLAG -880 2672 mc
FLAG -624 2880 0
FLAG -544 2672 md
FLAG -288 2880 0
FLAG -208 2672 alpha
FLAG -1504 3264 0
FLAG -1424 3056 icn
FLAG -1008 4736 0
FLAG -928 4528 acg
FLAG -320 4736 0
FLAG -240 4528 bcg
FLAG -1408 4240 0
FLAG -1328 3920 den
FLAG -1024 5008 0
FLAG -944 4800 ccg
FLAG -336 5008 0
FLAG -256 4800 dcg
FLAG -1024 5312 0
FLAG -944 5104 ecg
FLAG -336 5312 0
FLAG -256 5104 fcg
FLAG -1024 5728 0
FLAG -944 5520 adg
FLAG -336 5728 0
FLAG -256 5520 bdg
FLAG -1040 6000 0
FLAG -960 5792 cdg
FLAG -352 6000 0
FLAG -272 5792 ddg
FLAG -1040 6304 0
FLAG -960 6096 edg
FLAG -352 6304 0
FLAG -272 6096 fdg
FLAG -128 6960 Vout_IRM
FLAG -112 7248 0
FLAG -1072 6960 Vi
FLAG 272 3264 0
FLAG 352 3056 iv1x
FLAG 656 3264 0
FLAG 736 3056 iv1y
SYMBOL voltage -1152 624 R0
SYMATTR InstName V1
SYMATTR Value {Vin}
SYMBOL ind -352 704 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName L1
SYMATTR Value {Lm}
SYMBOL sw -544 528 R0
SYMATTR InstName S1
SYMATTR Value FET
SYMBOL sw -544 752 R0
SYMATTR InstName S2
SYMATTR Value FET
SYMBOL cap -48 768 R0
SYMATTR InstName C1
SYMATTR Value 1m
SYMBOL res 96 752 R0
SYMATTR InstName R1
SYMATTR Value {rout}
SYMBOL diode -384 864 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value DI
SYMBOL diode -384 624 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D2
SYMATTR Value DI
SYMBOL res -736 1184 R0
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL voltage -720 1328 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V3
SYMATTR Value {ic}
SYMBOL bi 80 1440 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B1
SYMATTR Value I=-I(S1)
SYMBOL res -32 1328 R0
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL bi -384 1440 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -213 -123 Left 2
SYMATTR InstName B2
SYMATTR Value I=IF(V(CS)>=V(Vth), 1, 0)
SYMBOL res -288 1344 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL cap -208 1376 R0
SYMATTR InstName C2
SYMATTR Value 1n
SYMBOL cap -96 1376 R0
SYMATTR InstName C3
SYMATTR Value 10n
SYMBOL res -784 1264 M0
SYMATTR InstName R5
SYMATTR Value 1Meg
SYMBOL bi -944 1280 M0
SYMATTR InstName B3
SYMATTR Value I=IF(V(CMP)>0.5, 100m, 0)
SYMBOL Digital\\dflop 1040 1296 R0
SYMATTR InstName A1
SYMBOL voltage 608 1424 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR SpiceLine Rser=1
SYMATTR InstName V4
SYMATTR Value 1
SYMBOL res 1568 1536 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL diode 1408 1584 R0
SYMATTR InstName D3
SYMATTR Value DI
SYMBOL res 1360 1744 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 1
SYMBOL bi 1424 1792 M0
SYMATTR InstName B4
SYMATTR Value I=delay(V(CMP), 50n)
SYMBOL bi -896 848 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -213 -123 Left 2
SYMATTR InstName B5
SYMATTR Value I=10*V(GD)-5
SYMBOL res -832 736 R0
SYMATTR InstName R8
SYMATTR Value 1
SYMBOL voltage 1776 1376 R0
WINDOW 123 0 0 Left 0
WINDOW 39 24 124 Left 2
SYMATTR InstName V2
SYMATTR Value PULSE(0 1 0 1n 1n 50n {Tsw})
SYMBOL diode 1408 1424 R0
SYMATTR InstName D4
SYMATTR Value DI
SYMBOL bi 896 1680 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B6
SYMATTR Value I=delay(V(osc), 400n)
SYMBOL res 672 1568 R0
SYMATTR InstName R9
SYMATTR Value 1
SYMBOL cap 1040 1584 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL cap 752 1616 R0
SYMATTR InstName C5
SYMATTR Value 1n
SYMBOL res 1184 1216 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL cap -752 752 R0
SYMATTR InstName C6
SYMATTR Value 1n
SYMBOL voltage -720 1456 R0
WINDOW 3 11 140 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value PULSE(0 0.05 10m 10n 10n {Tsw-20n})
SYMATTR InstName V5
SYMBOL cap 1440 912 R0
SYMATTR InstName C7
SYMATTR Value 10n
SYMBOL bi 1600 992 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B7
SYMATTR Value I=V(GD)*1m
SYMBOL diode 1344 800 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D5
SYMATTR Value DI
SYMBOL bi 256 1440 M180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B8
SYMATTR Value I=mcmp*V(mcomp)/100k
SYMBOL bv -960 3104 R0
SYMATTR InstName B9
SYMATTR Value V=V(alpha)*V(icn) + (1-V(alpha))*V(iv1)-Tsw*V(md)
SYMBOL bv -128 3104 R0
SYMATTR InstName B10
SYMATTR Value V=delay(V(iv0), Tsw)
SYMBOL bv -960 2720 R0
SYMATTR InstName B11
SYMATTR Value V=(V(vi)-V(Vout_IRM))/Lm
SYMBOL bv -624 2720 R0
SYMATTR InstName B12
SYMATTR Value V=V(vout_IRM)/Lm
SYMBOL bv -288 2720 R0
SYMATTR InstName B13
SYMATTR Value V=(V(mc)+V(md))/(V(mc)+mcmp)
SYMBOL bv -1504 3104 R0
SYMATTR InstName B14
SYMATTR Value V=delay(V(icn_), 414.5n)+4.5m
SYMBOL bv -1008 4576 R0
SYMATTR InstName B15
SYMATTR Value V=(1/(2*Tswx))*V(mc)/V(den)
SYMBOL bv -320 4576 R0
SYMATTR InstName B16
SYMATTR Value V=-(1/(2*Tswx))*(V(mc) + 2*V(md))/V(den)
SYMBOL bv -1408 4080 R0
SYMATTR InstName B17
SYMATTR Value V=(V(mc)+V(md))**2
SYMBOL bv -1024 4848 R0
SYMATTR InstName B18
SYMATTR Value V=(1/(Tswx))*V(md)/V(den)
SYMBOL bv -336 4848 R0
SYMATTR InstName B19
SYMATTR Value V=V(mc)*V(md)/V(den)
SYMBOL bv -1024 5152 R0
SYMATTR InstName B20
SYMATTR Value V=V(md)*V(md)/V(den)
SYMBOL bv -336 5152 R0
SYMATTR InstName B21
SYMATTR Value V=(Tsw/2)*V(mc)*V(md)*V(md)/V(den)
SYMBOL bv -1024 5568 R0
SYMATTR InstName B22
SYMATTR Value V=-(1/(2*Tswy))*(2*V(mc)+V(md))/V(den)
SYMBOL bv -336 5568 R0
SYMATTR InstName B23
SYMATTR Value V=(1/(2*Tswy))*V(md)/V(den)
SYMBOL bv -1040 5840 R0
SYMATTR InstName B24
SYMATTR Value V=(1/(Tswy))*V(mc)/V(den)
SYMBOL bv -352 5840 R0
SYMATTR InstName B25
SYMATTR Value V=V(mc)*V(mc)/V(den)
SYMBOL bv -1040 6144 R0
SYMATTR InstName B26
SYMATTR Value V=V(mc)*V(md)/V(den)
SYMBOL bv -352 6144 R0
SYMATTR InstName B27
SYMATTR Value V=(Tsw/2)*V(mc)*V(mc)*V(md)/V(den)
SYMBOL cap -272 7040 R0
SYMATTR InstName C8
SYMATTR Value 1m
SYMBOL res -128 7024 R0
SYMATTR InstName R11
SYMATTR Value {rout}
SYMBOL bi -528 7136 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName BIdg
SYMATTR Value I=V(adg)*V(iv0)*V(iv0) + V(bdg)*V(iv1y)*V(iv1y) + V(cdg)*V(iv0)*V(iv1y) + V(ddg)*V(iv0) + V(edg)*V(iv1y) + V(fdg)
SYMBOL bi -928 6960 R270
WINDOW 0 32 40 VTop 2
WINDOW 3 -50 -338 VBottom 2
SYMATTR InstName BIcg
SYMATTR Value I=V(acg)*V(iv0)*V(iv0) + V(bcg)*V(iv1x)*V(iv1x) + V(ccg)*V(iv0)*V(iv1x) + V(dcg)*V(iv0) + V(ecg)*V(iv1x) + V(fcg)
SYMBOL res -1424 3984 R0
SYMATTR InstName R12
SYMATTR Value 1
SYMBOL diode -1584 3936 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D6
SYMATTR Value DI
SYMBOL bv -1664 4064 R0
SYMATTR InstName B28
SYMATTR Value V=1
SYMBOL current 320 768 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I1
SYMATTR Value PULSE(0 1 11m 1n 1n {Tsw})
SYMBOL current 80 7040 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName I2
SYMATTR Value PULSE(0 1 11m 1n 1n {Tsw})
SYMBOL bv 272 3104 R0
SYMATTR InstName B29
SYMATTR Value V=delay(V(iv0), Tswx)
SYMBOL bv 656 3104 R0
SYMATTR InstName B30
SYMATTR Value V=delay(V(iv0), Tswy)
TEXT -1208 -720 Left 2 !.param Vin 9\n.param Vout 5.25\n.param Vcg {Vin-Vout}\n.param Vdg {Vout}\n.param iv 4\n.param Lm 23u\n.param Fsw 100k\n.param Tsw {1/Fsw}
TEXT -1216 -272 Left 2 !.param mc {Vcg/Lm}\n.param md {Vdg/Lm}
TEXT -912 -720 Left 2 ;INPUT BUS VOLTAGE\nCONVERTER OUTPUT VOLTAGE\nCHARGING CYCLE VOLTAGE\nDISCHARGING CYCLE VOLTAGE\nSTEADY-STATE VALLEY CURRENT\nMAGNETIZING INDUCTANCE\nSWITCHING FREQUENCY\nSWITCHING PERIOD
TEXT -1216 -416 Left 2 ;INPUT PARAMETERS -- SYSTEM STEADY-STATE OPERATING CONDITIONS
TEXT -576 -272 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE (A/S)\nINDUCTOR CURRENT DISCHARGING SLOPE (A/S)
TEXT -1216 0 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1232 -848 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1224 -808 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1224 -784 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT -1216 -168 Left 2 !.param hvdb 12
TEXT -1216 -136 Left 2 !.param hvmag {10**(hvdb/20)}\n.param mcmp {(mc+md)*(1+hvmag)/(2*hvmag)-mc}
TEXT -576 -168 Left 2 ;PEAK CURRENT CONTROLLER PEAKING (dB)\nPEAK CURRENT CONTROLLER PEAKING - LINEAR\nCONTROLLER SLOPE COMPENSATION
TEXT -1216 -64 Left 2 !.param alpha {(mc+md)/(mc+mcmp)}
TEXT -576 -64 Left 2 ;IIR FILTER COEFFICIENT
TEXT -1208 -208 Left 2 !.param D {md/(mc+md)}
TEXT -1160 368 Left 2 !.model FET SW(Ron=.1u Roff=10Meg Vt=2.5 Vh=-.5)
<<<<<<< HEAD
TEXT -1000 1104 Left 2 !.tran 0 10.1m 9.99m
=======
TEXT -1000 1104 Left 2 ;.tran 0 15m 9.98m
>>>>>>> f43284981b4dc3cf56ffbd0996775a78d18f2547
TEXT -1144 312 Left 2 !.model DI D(Ron=1u Vfwd=1u)
TEXT -680 1664 Left 2 !.model CS SW(Ron=.1u Roff=10Meg Vt=0.75 Vh=-.5)
TEXT -1216 64 Left 2 !.param irip {D*Tsw*mc}\n.param iout {irip/2 + iv}\n.param rout {Vout/iout}\n.param ic {iv + D*Tsw*(mc+mcmp)}
TEXT -880 3080 Left 2 ;iv[n]
TEXT -1008 3400 Left 4 ;IIR FILTER FOR TRANSFER FUNCTION
TEXT -1008 3440 Left 2 ;RELATES VALLEY CURRENTS TO PEAK CURRENT COMPARATOR THRESHOLD
TEXT -48 3080 Left 2 ;iv[n-1]
TEXT -1056 4032 Left 2 ;.param mc {Vcg/Lm}\n.param md {Vdg/Lm}\n.param dencom {(mc*mc + 2*mc*md + md*md)}\n.param acg {(1/(2*Tsw))*((mc)/dencom)}\n.param bcg {-(1/(2*Tsw))*((mc + 2*md)/dencom)}\n.param ccg {(1/(Tsw))*((md)/dencom)}\n.param dcg {(mc*md)/dencom}\n.param ecg {md*md/dencom}\n.param fcg  {(Tsw/2)*mc*md*md/dencom}
TEXT -384 4024 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE\nINDUCTOR CURRENT DISCHARGING SLOPE\nCONVENIENT VARIABLE SUBSTITUTION FOR A DENOMINATOR TERM FOUND IN EVERY COEFFICIENT\nCOEFFICIENT: acg*iv[n]^2\nCOEFFICIENT: bcg*iv[n-1]^2\nCOEFFICIENT: ccg*iv[n]*iv[n-1]\nCOEFFICIENT: dcg*iv[n]\nCOEFFICIENT: ecg*iv[n-1]\nCONSTANT   :  fcg, APPEARS IN STEADY-STATE AVERAGE CURRENT COMPUTATION
TEXT -1056 4336 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1072 3840 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1064 3880 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1064 3904 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT 1064 4032 Left 2 ;;.param mc {Vcg/Lm}\n;.param md {Vdg/Lm}\n;.param dencom {(mc*mc + 2*mc*md + md*md)}\n.param adg {-(1/(2*Tsw))*((2*mc + md)/dencom)}\n.param bdg {(1/(2*Tsw))*((md)/dencom)}\n.param cdg {(1/(Tsw))*((mc)/dencom)}\n.param ddg {(mc*mc)/dencom}\n.param edg {mc*md/dencom}\n.param fdg  {(Tsw/2)*md*mc*mc/dencom}
TEXT 1736 4024 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE\nINDUCTOR CURRENT DISCHARGING SLOPE\nCONVENIENT VARIABLE SUBSTITUTION FOR A DENOMINATOR TERM FOUND IN EVERY COEFFICIENT\nCOEFFICIENT: adg*iv[n]^2\nCOEFFICIENT: bdg*iv[n-1]^2\nCOEFFICIENT: cdg*iv[n]*iv[n-1]\nCOEFFICIENT: ddg*iv[n]\nCOEFFICIENT: edg*iv[n-1]\nCONSTANT   :  fdg, APPEARS IN STEADY-STATE AVERAGE CURRENT COMPUTATION
TEXT -1712 6784 Left 2 ;V=V(acg)*V(iv0)*V(iv0) + V(bcg)*V(iv1)*V(iv1) + V(ccg)*V(iv0)*V(iv1) + V(dcg)*V(iv0) + V(ecg)*V(iv1) + V(fcg)
TEXT -1768 7320 Left 2 ;V=V(adg)*V(iv0)*V(iv0) + V(bdg)*V(iv1)*V(iv1) + V(cdg)*V(iv0)*V(iv1) + V(ddg)*V(iv0) + V(edg)*V(iv1) + V(fdg)
TEXT 352 3080 Left 2 ;iv[n-1]
TEXT 168 3384 Left 2 !.param Tswx {Tsw*D}
TEXT 168 3424 Left 2 !.param Tswy {Tsw*(1-D)}
TEXT 736 3080 Left 2 ;iv[n-1]
TEXT -984 1056 Left 2 !.tran 0 15m 9.98m
LINE Normal -368 -400 -1216 -400 2
LINE Normal -368 16 -1216 16 2
LINE Normal 304 -832 -1232 -832 2
LINE Normal -32 3424 -1008 3424 2
LINE Normal -208 4352 -1056 4352 2
LINE Normal 464 3856 -1072 3856 2
