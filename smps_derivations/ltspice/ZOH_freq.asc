Version 4
SHEET 1 2200 4212
WIRE -880 208 -1024 208
WIRE -848 208 -880 208
WIRE 304 224 144 224
WIRE 448 224 304 224
WIRE 624 224 448 224
WIRE 640 224 624 224
WIRE -1024 320 -1024 208
WIRE -880 336 -880 208
WIRE 144 352 144 224
WIRE 448 352 448 224
WIRE 640 352 640 224
WIRE 304 368 304 224
WIRE 144 544 144 432
WIRE 304 544 304 432
WIRE 304 544 144 544
WIRE 448 544 448 432
WIRE 448 544 304 544
WIRE 640 544 640 432
WIRE 640 544 448 544
WIRE -1024 560 -1024 400
WIRE -880 560 -880 416
WIRE -880 560 -1024 560
WIRE 144 592 144 544
WIRE -1024 656 -1024 560
WIRE 288 880 128 880
WIRE 432 880 288 880
WIRE 608 880 432 880
WIRE 624 880 608 880
WIRE 1280 880 1120 880
WIRE 1312 880 1280 880
WIRE 1424 880 1312 880
WIRE 1664 880 1424 880
WIRE 128 1008 128 880
WIRE 432 1008 432 880
WIRE 624 1008 624 880
WIRE 1120 1008 1120 880
WIRE 1424 1008 1424 880
WIRE 1664 1008 1664 880
WIRE 288 1024 288 880
WIRE 1280 1024 1280 880
WIRE 128 1200 128 1088
WIRE 288 1200 288 1088
WIRE 288 1200 128 1200
WIRE 432 1200 432 1088
WIRE 432 1200 288 1200
WIRE 624 1200 624 1088
WIRE 624 1200 432 1200
WIRE 1120 1200 1120 1088
WIRE 1280 1200 1280 1088
WIRE 1280 1200 1120 1200
WIRE 1424 1200 1424 1088
WIRE 1424 1200 1280 1200
WIRE 1664 1200 1664 1088
WIRE 1664 1200 1424 1200
WIRE 128 1248 128 1200
WIRE 1120 1248 1120 1200
WIRE 1280 1472 1120 1472
WIRE 1312 1472 1280 1472
WIRE 1424 1472 1312 1472
WIRE 1120 1600 1120 1472
WIRE 1424 1600 1424 1472
WIRE 1280 1616 1280 1472
WIRE 1120 1792 1120 1680
WIRE 1280 1792 1280 1680
WIRE 1280 1792 1120 1792
WIRE 1424 1792 1424 1680
WIRE 1424 1792 1280 1792
WIRE 1120 1840 1120 1792
FLAG -1024 656 0
FLAG -848 208 vpulse
FLAG 144 592 0
FLAG 624 224 vzoh
FLAG 128 1248 0
FLAG 608 880 zoh2
FLAG 1120 1248 0
FLAG 1312 880 ramp
FLAG 1120 1840 0
FLAG 1312 1472 out
DATAFLAG 1552 880 ""
DATAFLAG 320 880 ""
DATAFLAG 1136 1472 ""
DATAFLAG 368 224 ""
SYMBOL voltage -1024 304 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 0
SYMATTR Value2 AC 1
SYMBOL bi 144 432 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B1
SYMATTR Value I=V(vpulse)
SYMBOL res 432 336 R0
SYMATTR InstName R1
SYMATTR Value {fsw*1k}
SYMBOL bi 640 352 R0
SYMATTR InstName B2
SYMATTR Value I=delay(V(vpulse),D*tsw)
SYMBOL cap 288 368 R0
SYMATTR InstName C1
SYMATTR Value {10m*tsw}
SYMBOL bi 128 1088 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B3
SYMATTR Value I=V(vpulse)
SYMBOL res 416 992 R0
SYMATTR InstName R2
SYMATTR Value {fsw*1k}
SYMBOL bi 624 1008 R0
SYMATTR InstName B4
SYMATTR Value I=delay(V(vpulse),D*tsw)
SYMBOL cap 272 1024 R0
SYMATTR InstName C2
SYMATTR Value {10m*tsw}
SYMBOL bi 1120 1088 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B5
SYMATTR Value I=V(zoh2)
SYMBOL res 1408 992 R0
SYMATTR InstName R3
SYMATTR Value {fsw*1k}
SYMBOL cap 1264 1024 R0
SYMATTR InstName C3
SYMATTR Value {D*tsw}
SYMBOL bi 1664 1008 R0
SYMATTR InstName B6
SYMATTR Value I=delay(100*D*V(vpulse),D*tsw)
SYMBOL bi 1120 1680 R180
WINDOW 0 24 80 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName B7
SYMATTR Value I=V(vzoh) + v(ramp)
SYMBOL res 1408 1584 R0
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL cap 1264 1616 R0
SYMATTR InstName C4
SYMATTR Value 1p
SYMBOL res -896 320 R0
SYMATTR InstName Rp
SYMATTR Value 1
TEXT -1208 -720 Left 2 !.param Vin 24\n.param Vout 5.25\n.param Vcg {Vin}\n.param Vdg {4*Vout}\n.param ic 7.5\n.param Lm 23u\n.param Fsw 100k\n.param Tsw {1/Fsw}
TEXT -1216 -272 Left 2 !.param mc {Vcg/Lm}\n.param md {Vdg/Lm}
TEXT -912 -720 Left 2 ;INPUT BUS VOLTAGE\nCONVERTER OUTPUT VOLTAGE\nCHARGING CYCLE VOLTAGE\nDISCHARGING CYCLE VOLTAGE\nSTEADY-STATE PEAK CURRENT CONTROL LEVEL\nMAGNETIZING INDUCTANCE\nSWITCHING FREQUENCY\nSWITCHING PERIOD
TEXT -1216 -416 Left 2 ;INPUT PARAMETERS -- SYSTEM STEADY-STATE OPERATING CONDITIONS
TEXT -576 -272 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE (A/S)\nINDUCTOR CURRENT DISCHARGING SLOPE (A/S)
TEXT -1216 0 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1232 -848 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1224 -808 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1224 -784 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT -1216 -168 Left 2 !.param hvdb 3
TEXT -1216 -136 Left 2 !.param hvmag {10**(hvdb/20)}\n.param mcmp {(mc+md)*(1+hvmag)/(2*hvmag)-mc}
TEXT -576 -168 Left 2 ;PEAK CURRENT CONTROLLER PEAKING (dB)\nPEAK CURRENT CONTROLLER PEAKING - LINEAR\nCONTROLLER SLOPE COMPENSATION
TEXT -1216 -64 Left 2 !.param alpha {(mc+md)/(mc+mcmp)}
TEXT -576 -64 Left 2 ;IIR FILTER COEFFICIENT
TEXT 216 600 Left 2 !;tran 0 30u 0 1n startup
TEXT -1208 -208 Left 2 !.param D {md/(mc+md)}
TEXT 48 1520 Left 2 !.ac oct 100 10 1meg
LINE Normal -368 -400 -1216 -400 2
LINE Normal -368 16 -1216 16 2
LINE Normal 304 -832 -1232 -832 2
