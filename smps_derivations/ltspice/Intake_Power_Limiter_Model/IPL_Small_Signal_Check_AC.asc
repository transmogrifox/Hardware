Version 4
SHEET 1 2048 1860
WIRE 64 -1856 16 -1856
WIRE 192 -1856 64 -1856
WIRE 352 -1856 272 -1856
WIRE 448 -1856 352 -1856
WIRE 528 -1856 448 -1856
WIRE 688 -1856 608 -1856
WIRE 768 -1856 688 -1856
WIRE 64 -1792 64 -1856
WIRE 448 -1792 448 -1856
WIRE 688 -1792 688 -1856
WIRE 64 -1664 64 -1712
WIRE 448 -1664 448 -1728
WIRE 688 -1664 688 -1728
WIRE 64 -1312 -16 -1312
WIRE -16 -1248 -16 -1312
WIRE -16 -1120 -16 -1168
WIRE 880 -1056 688 -1056
WIRE 688 -992 688 -1056
WIRE 160 -960 112 -960
WIRE 112 -896 112 -960
WIRE 688 -848 688 -912
WIRE 112 -768 112 -816
WIRE 864 -704 672 -704
WIRE 672 -640 672 -704
WIRE 160 -624 112 -624
WIRE 112 -560 112 -624
WIRE 672 -496 672 -560
WIRE 112 -432 112 -480
WIRE 880 -336 688 -336
WIRE 160 -320 112 -320
WIRE 688 -272 688 -336
WIRE 112 -256 112 -320
WIRE 112 -128 112 -176
WIRE 688 -128 688 -192
WIRE 864 16 672 16
WIRE 112 80 64 80
WIRE 176 80 112 80
WIRE 672 80 672 16
WIRE 112 128 112 80
WIRE 672 224 672 160
WIRE 112 272 112 208
WIRE 176 272 112 272
WIRE 112 304 112 272
WIRE 112 448 112 384
WIRE 880 448 688 448
WIRE 688 512 688 448
WIRE 688 656 688 592
WIRE 864 800 672 800
WIRE 672 864 672 800
WIRE 672 1008 672 944
FLAG 112 448 0
FLAG 176 80 ipk
FLAG 672 -496 0
FLAG 864 -704 v0_
FLAG 688 -848 0
FLAG 880 -1056 v1_
FLAG 112 -432 0
FLAG 160 -624 Dpulse
FLAG 112 -768 0
FLAG 160 -960 SFST
FLAG 112 -128 0
FLAG 160 -320 dT_pulse
FLAG 672 224 0
FLAG 864 16 v0
FLAG 688 -128 0
FLAG 880 -336 v1
FLAG 672 1008 0
FLAG 864 800 v0t
FLAG 688 656 0
FLAG 880 448 v1t
FLAG -16 -1120 0
FLAG 64 -1312 LF_POLE
FLAG 176 272 ipkac
FLAG 64 -1664 0
FLAG 16 -1856 DC_GAIN
FLAG 448 -1664 0
FLAG 768 -1856 VsfstContin
FLAG 688 -1664 0
FLAG 352 -1856 VsfstSampleContin
DATAFLAG 736 -1056 ""
DATAFLAG 64 80 ""
DATAFLAG 112 -624 ""
DATAFLAG 112 -960 ""
DATAFLAG 112 -320 ""
DATAFLAG 736 -336 ""
DATAFLAG 736 448 ""
DATAFLAG -16 -1312 ""
DATAFLAG 64 -1856 ""
SYMBOL voltage 112 288 R0
WINDOW 3 24 152 Left 2
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value ""
SYMATTR Value2 AC 1
SYMBOL bv 672 -656 R0
SYMATTR InstName B3
SYMATTR Value V=(V(v1_)-Is*R)*exp(-V(ipk)*L/(Vin*tau)) + Is*R + (Is/C)*(T-V(ipk)*L/Vin)
SYMBOL bv 688 -1008 R0
SYMATTR InstName B4
SYMATTR Value V=delay(V(v0_),T)
SYMBOL voltage 112 -576 R0
SYMATTR InstName V2
SYMATTR Value {D}
SYMBOL voltage 112 -912 R0
SYMATTR InstName V3
SYMATTR Value {Vsfst}
SYMBOL voltage 112 -272 R0
SYMATTR InstName V5
SYMATTR Value {dT}
SYMBOL bv 672 64 R0
SYMATTR InstName B1
SYMATTR Value V=V(v1) - (V(v1)/R - Is)*V(ipk)*L/(Vin*C)  + (Is/C)*(T-V(ipk)*L/Vin)
SYMBOL bv 688 -288 R0
SYMATTR InstName B2
SYMATTR Value V=delay(V(v0),T)
SYMBOL bv 672 848 R0
SYMATTR InstName B5
SYMATTR Value V=V(v1t)*(1 -dI*L/(Vin*R*C))  - V(ipkac)*(Vsfst*L/(Vin*R*C) )
SYMBOL bv 688 496 R0
SYMATTR InstName B6
SYMATTR Value V=delay(V(v0t),T)
SYMBOL voltage -16 -1264 R0
SYMATTR InstName V4
SYMATTR Value {plow}
SYMBOL voltage 112 112 R0
WINDOW 3 31 91 Left 2
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value {dI}
SYMBOL bv 64 -1808 R0
SYMATTR InstName B7
SYMATTR Value V=V(ipkac)*Gsfst
SYMBOL cap 432 -1792 R0
SYMATTR InstName C1
SYMATTR Value {C}
SYMBOL res 288 -1872 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value {Rpeq}
SYMBOL res 624 -1872 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 2.49k
SYMBOL cap 672 -1792 R0
SYMATTR InstName C2
SYMATTR Value 2.2n
TEXT -432 -472 Left 2 !.param L = 35u\n.param IP0 = 10.3\n.param C = 100n\n.param Vin = 8\n.param Vout=12\n.param Nps = 2\n.param R = 1k\n.param Fs = 65k\n.param T = {1/Fs}\n.param mcmp = 550k\n.param gVc = 0.07\n.param Rsns = 6m\n.param tau = {R*C}\n.param Is = 20u
TEXT 88 504 Left 2 ;.tran 0 100m 0
TEXT -496 552 Left 2 ;V=V(v1) - V(v1)*V(ipk)*L/(tau*Vin) - Is*L*V(ipk)/(C*Vin) + Is*R + Is*T/C
TEXT -400 224 Left 2 !.ac dec 1k 0.1 32.5k
TEXT -528 -904 Left 2 !.param Rpd = {R}\n.param Isfst = {Is}\n.param md = {Vout*Nps/L}\n.param mc = {Vin/L}\n.param Dpt = {md/(mc+md)}\n.param Iv = {IP0 - Dpt*mc/Fs}\n.param Ic = {Iv + Dpt*(mc+mcmp)/Fs}\n.param Vsfst = {{1.0 + Ic*Rsns/gVc}}\n.param Ipd = {Vsfst/Rpd - Isfst}\n.param D = {(-Ipd*Rpd  + Vsfst)/Vsfst}\n.param dT = {D/Fs}\n.param dI = {dT*mc}
TEXT -584 -1232 Left 2 !.param Rpeq {R/D}\n.param plow {1/(2*pi*Rpeq*C)}
TEXT -472 -1864 Left 2 !.param Gsfst {-Vsfst/dI}
TEXT 904 1072 Left 2 ;dI       : Steady state peak current overshoot (Ipk - Itrip)\nVsfst  : Steady state soft start pin voltage
