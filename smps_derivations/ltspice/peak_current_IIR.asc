Version 4
SHEET 1 2200 4212
WIRE 256 -288 176 -288
WIRE 176 -224 176 -288
WIRE 176 -80 176 -144
WIRE 256 -32 176 -32
WIRE 176 32 176 -32
WIRE -1120 112 -1200 112
WIRE -1200 176 -1200 112
WIRE 176 176 176 112
WIRE -1200 320 -1200 256
WIRE -1120 768 -1200 768
WIRE -400 768 -480 768
WIRE -1200 832 -1200 768
WIRE -480 832 -480 768
WIRE -1200 976 -1200 912
WIRE -480 976 -480 912
FLAG -1200 320 0
FLAG -1120 112 icn
FLAG -1200 976 0
FLAG -1120 768 iv0
FLAG 176 -80 0
FLAG 256 -288 mcmp_v
FLAG -480 976 0
FLAG -400 768 iv1
FLAG 176 176 0
FLAG 256 -32 alpha_v
SYMBOL voltage -1200 160 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value {ic}
SYMBOL bv -1200 816 R0
SYMATTR InstName B5
SYMATTR Value V=alpha*V(icn) + (1-alpha)*V(iv1)
SYMBOL bv -480 816 R0
SYMATTR InstName B1
SYMATTR Value V=V(iv0) Laplace=exp(-s*Tsw)
SYMBOL bv 176 -240 R0
SYMATTR InstName B2
SYMATTR Value V={mcmp*V(icn)}
SYMBOL bv 176 16 R0
SYMATTR InstName B3
SYMATTR Value V={alpha*V(icn)}
TEXT -1208 -720 Left 2 !.param Vin 18.75\n.param Vout 5.25\n.param Vcg {Vin}\n.param Vdg {4*Vout}\n.param ic 7.5\n.param Lm 23u\n.param Fsw 100k\n.param Tsw {1/Fsw}
TEXT -1216 -272 Left 2 !.param mc {Vcg/Lm}\n.param md {Vdg/Lm}
TEXT -1224 488 Left 2 !.ac oct 500 100 {Fsw}
TEXT -912 -720 Left 2 ;INPUT BUS VOLTAGE\nCONVERTER OUTPUT VOLTAGE\nCHARGING CYCLE VOLTAGE\nDISCHARGING CYCLE VOLTAGE\nSTEADY-STATE PEAK CURRENT CONTROL LEVEL\nMAGNETIZING INDUCTANCE\nSWITCHING FREQUENCY\nSWITCHING PERIOD
TEXT -1216 -416 Left 2 ;INPUT PARAMETERS -- SYSTEM STEADY-STATE OPERATING CONDITIONS
TEXT -576 -272 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE (A/S)\nINDUCTOR CURRENT DISCHARGING SLOPE (A/S)
TEXT -1216 0 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1120 136 Left 2 ;ic[n]
TEXT -1120 792 Left 2 ;iv[n-1]
TEXT -1232 528 Left 2 ;SYSTEM INPUT SOURCES
TEXT -1224 392 Left 2 ;STIMULUS GENERATION FOR VALLEY CURRENTS
TEXT -1232 -848 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1224 -808 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1224 -784 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT -1216 -168 Left 2 !.step param hvdb -9 9 3
TEXT -1216 -136 Left 2 !.param hvmag {10**(hvdb/20)}\n.param mcmp {(mc+md)*(1+hvmag)/(2*hvmag)-mc}
TEXT -576 -168 Left 2 ;PEAK CURRENT CONTROLLER PEAKING (dB)\nPEAK CURRENT CONTROLLER PEAKING - LINEAR\nCONTROLLER SLOPE COMPENSATION
TEXT 304 -248 Left 2 ;Place to probe for computed \nslope compensation (A/S)
TEXT -1248 1112 Left 4 ;IIR FILTER FOR TRANSFER FUNCTION
TEXT -1248 1152 Left 2 ;RELATES VALLEY CURRENTS TO PEAK CURRENT COMPARATOR THRESHOLD
TEXT -400 792 Left 2 ;iv[n-1]
TEXT -1216 -64 Left 2 !.param alpha {(mc+md)/(mc+mcmp)}
TEXT 304 8 Left 2 ;Place to probe for computed \nslope compensation (A/S)
TEXT -576 -64 Left 2 ;IIR FILTER COEFFICIENT
TEXT 168 320 Left 2 !.meas mcmpv FIND V(mcmp_v) AT 1kHz\n.meas alpha FIND V(alpha_v) AT 1kHz\n.meas peak FIND V(iv0) AT {Fsw/2}
TEXT 168 424 Left 2 !.opt meascplxfmt=cartesian
LINE Normal -368 -400 -1216 -400 2
LINE Normal -368 16 -1216 16 2
LINE Normal -384 544 -1232 544 2
LINE Normal 304 -832 -1232 -832 2
LINE Normal -272 1136 -1248 1136 2
