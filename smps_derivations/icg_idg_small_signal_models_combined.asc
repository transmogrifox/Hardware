Version 4
SHEET 1 2200 6276
WIRE -1104 176 -1184 176
WIRE -816 176 -896 176
WIRE -1184 240 -1184 176
WIRE -896 240 -896 176
WIRE -1184 384 -1184 320
WIRE -896 384 -896 320
WIRE -1056 768 -1184 768
WIRE -768 768 -896 768
WIRE -1056 880 -1056 768
WIRE -768 880 -768 768
WIRE -1056 1024 -1056 960
WIRE -768 1024 -768 960
WIRE -1680 1344 -1856 1344
WIRE -1376 1344 -1520 1344
WIRE -1680 1456 -1680 1344
WIRE -1376 1456 -1376 1344
WIRE -1680 1600 -1680 1536
WIRE -1376 1600 -1376 1536
WIRE -1424 1792 -1664 1792
WIRE -736 1792 -928 1792
WIRE 32 1792 -176 1792
WIRE 1056 1792 976 1792
WIRE -1664 1904 -1664 1792
WIRE -928 1904 -928 1792
WIRE -176 1904 -176 1792
WIRE 976 1904 976 1792
WIRE -1664 2048 -1664 1984
WIRE -928 2048 -928 1984
WIRE -176 2048 -176 1984
WIRE 976 2048 976 1984
WIRE -832 3424 -960 3424
WIRE -832 3536 -832 3424
WIRE -832 3680 -832 3616
WIRE -1744 4000 -1920 4000
WIRE -1440 4000 -1584 4000
WIRE -1744 4112 -1744 4000
WIRE -1440 4112 -1440 4000
WIRE -1744 4256 -1744 4192
WIRE -1440 4256 -1440 4192
WIRE -1488 4448 -1728 4448
WIRE -800 4448 -992 4448
WIRE -32 4448 -240 4448
WIRE 992 4448 912 4448
WIRE -1728 4560 -1728 4448
WIRE -992 4560 -992 4448
WIRE -240 4560 -240 4448
WIRE 912 4560 912 4448
WIRE -1728 4704 -1728 4640
WIRE -992 4704 -992 4640
WIRE -240 4704 -240 4640
WIRE 912 4704 912 4640
FLAG -1424 1792 icg_irm_ss
FLAG -1664 2048 0
FLAG -896 768 Ioo
FLAG -768 1024 0
FLAG -1856 1344 k0
FLAG -1680 1600 0
FLAG -1520 1344 k1
FLAG -1376 1600 0
FLAG -1184 384 0
FLAG -1104 176 iv0
FLAG -896 384 0
FLAG -816 176 iv1
FLAG 32 1792 icg_irm
FLAG -176 2048 0
FLAG -736 1792 <icgbasso>
FLAG -928 2048 0
FLAG -1056 1024 0
FLAG -1184 768 IooChk
FLAG 976 2048 0
FLAG 1056 1792 icg_izoh
FLAG -1488 4448 idg_irm_ss
FLAG -1728 4704 0
FLAG -960 3424 Ioodg
FLAG -832 3680 0
FLAG -1920 4000 kdg0
FLAG -1744 4256 0
FLAG -1584 4000 kdg1
FLAG -1440 4256 0
FLAG -32 4448 idg_irm
FLAG -240 4704 0
FLAG -800 4448 <idgbasso>
FLAG -992 4704 0
FLAG 912 4704 0
FLAG 992 4448 idg_izoh
DATAFLAG -832 768 ""
DATAFLAG -1120 768 ""
DATAFLAG -1792 1344 ""
DATAFLAG -1424 1344 ""
DATAFLAG -1616 1792 ""
DATAFLAG -864 1792 ""
DATAFLAG -176 1792 ""
DATAFLAG -896 3424 ""
DATAFLAG -1856 4000 ""
DATAFLAG -1488 4000 ""
DATAFLAG -1680 4448 ""
DATAFLAG -928 4448 ""
DATAFLAG -240 4448 ""
SYMBOL bv -1664 1888 R0
SYMATTR InstName B1
SYMATTR Value V=V(k0)*V(iv0) + V(k1)*V(iv1) + fcg
SYMBOL bv -768 864 R0
SYMATTR InstName B2
SYMATTR Value V=(acg+bcg+ccg)*V(iv0)*V(iv0) + (dcg+ecg)*V(iv0) + fcg
SYMBOL bv -1680 1440 R0
WINDOW 3 -127 197 Left 2
SYMATTR Value V=2*acg*iv + ccg*iv +dcg
SYMATTR InstName B3
SYMBOL bv -1376 1440 R0
WINDOW 3 -69 198 Left 2
SYMATTR Value V=2*bcg*iv +ccg*iv + ecg
SYMATTR InstName B4
SYMBOL voltage -1184 224 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value {iv}
SYMBOL bv -896 224 R0
SYMATTR InstName B5
SYMATTR Value V=V(iv0) Laplace=exp(-s*Tsw)
SYMBOL bv -176 1888 R0
SYMATTR InstName B6
SYMATTR Value V=acg*V(iv0)*V(iv0) + bcg*V(iv1)*V(iv1) + ccg*V(iv0)*V(iv1) + dcg*V(iv0) + ecg*V(iv1) + fcg
SYMBOL bv -928 1888 R0
SYMATTR InstName B7
SYMATTR Value V=V(Ioo) Laplace=(1 + s/wrhpz)
SYMBOL bv -1056 864 R0
SYMATTR InstName B10
SYMATTR Value V=Iinf
SYMBOL bv 976 1888 R0
SYMATTR InstName B13
SYMATTR Value V=V(icg_irm_ss) Laplace=s*Tsw/(1 - exp(-s*Tsw))
SYMBOL bv -1728 4544 R0
SYMATTR InstName B8
SYMATTR Value V=V(kdg0)*V(iv0) + V(kdg1)*V(iv1) + fdg
SYMBOL bv -832 3520 R0
SYMATTR InstName B9
SYMATTR Value V=(adg+bdg+cdg)*V(iv0)*V(iv0) + (ddg+edg)*V(iv0) + fdg
SYMBOL bv -1744 4096 R0
WINDOW 3 -127 197 Left 2
SYMATTR Value V=2*adg*iv + cdg*iv +ddg
SYMATTR InstName B11
SYMBOL bv -1440 4096 R0
WINDOW 3 -69 198 Left 2
SYMATTR Value V=2*bdg*iv +cdg*iv + edg
SYMATTR InstName B12
SYMBOL bv -240 4544 R0
SYMATTR InstName B15
SYMATTR Value V=adg*V(iv0)*V(iv0) + bdg*V(iv1)*V(iv1) + cdg*V(iv0)*V(iv1) + ddg*V(iv0) + edg*V(iv1) + fdg
SYMBOL bv -992 4544 R0
SYMATTR InstName B16
SYMATTR Value V=V(Ioodg) Laplace=(1 - s/wrhpzdg)
SYMBOL bv 912 4544 R0
SYMATTR InstName B18
SYMATTR Value V=V(idg_irm_ss) Laplace=s*Tsw/(1 - exp(-s*Tsw))
TEXT -1680 2136 Left 3 ;AVERAGE OUTPUT CURRENT: \nSMALL SIGNAL MODEL
TEXT -1216 -704 Left 2 !.param Vin 48.75\n.param Vout 5.25\n.param N 4\n.param Vcg {Vin}\n.param Vdg {N*Vout}\n.param iv 10\n.param Lm 230u\n.param Fsw 130k\n.param Tsw {1/Fsw}
TEXT -1216 -272 Left 2 !.param mc {Vcg/Lm}\n.param md {Vdg/Lm}\n.param dencom {(mc*mc + 2*mc*md + md*md)}\n.param acg {(1/(2*Tsw))*((mc)/dencom)}\n.param bcg {-(1/(2*Tsw))*((mc + 2*md)/dencom)}\n.param ccg {(1/(Tsw))*((md)/dencom)}\n.param dcg {(mc*md)/dencom}\n.param ecg {md*md/dencom}\n.param fcg  {(Tsw/2)*mc*md*md/dencom}
TEXT -200 2136 Left 3 ;AVERAGE OUTPUT CURRENT: \nEXACT NONLINEAR EXPRESSION
TEXT -1208 552 Left 2 !.ac oct 500 10 {6.1*Fsw}
TEXT -944 2136 Left 3 ;AVERAGE OUTPUT CURRENT: \nCONVENTIONAL SMALL SIGNAL MODEL\n(e.g. CHRISTOPH BASSO)
TEXT -960 1544 Left 2 !.param Dc {Vdg/(Vdg+Vcg)}\n.param Dp {1-Dc}\n.param wrhpz ro*Dc*Dc/(Dp*Lm)
TEXT -960 1480 Left 2 !.param Iinf {(acg+bcg+ccg)*iv*iv + (dcg+ecg)*iv + fcg}\n.param ro {Vcg/Iinf}
TEXT -920 -704 Left 2 ;INPUT BUS VOLTAGE\nCONVERTER OUTPUT VOLTAGE\nCOUPLED INDUCTOR/TRANSFORMER TURNS RATIO (SECONDARY:PRIMARY)\nINDUCTOR CHARGING VOLTAGE\nINDUCTOR DISCHARGING VOLTAGE AS REFLECTED BACK TO PRIMARY SIDE\nSTEADY-STATE VALLEY CURRRENT\nMAGNETIZING INDUCTANCE\nSWITCHING FREQUENCY\nSWITCHING PERIOD
TEXT -1216 -416 Left 2 ;INPUT PARAMETERS -- SYSTEM STEADY-STATE OPERATING CONDITIONS
TEXT -544 -280 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE\nINDUCTOR CURRENT DISCHARGING SLOPE\nCONVENIENT VARIABLE SUBSTITUTION FOR A DENOMINATOR TERM FOUND IN EVERY COEFFICIENT\nCOEFFICIENT: acg*iv[n]^2\nCOEFFICIENT: bcg*iv[n-1]^2\nCOEFFICIENT: ccg*iv[n]*iv[n-1]\nCOEFFICIENT: dcg*iv[n]\nCOEFFICIENT: ecg*iv[n-1]\nCONSTANT   :  fcg, APPEARS IN STEADY-STATE AVERAGE CURRENT COMPUTATION
TEXT -1216 32 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1104 200 Left 2 ;iv[n]
TEXT -816 200 Left 2 ;iv[n-1]
TEXT -1216 592 Left 2 ;SYSTEM INPUT SOURCES
TEXT -1208 456 Left 2 ;STIMULUS GENERATION FOR VALLEY CURRENTS\ni[n] and i[n-1]
TEXT -1216 1088 Left 2 ;AVERAGED CURRENT STEADY STATE OUTPUT
TEXT -1232 2368 Left 2 ;SMALL SIGNAL MODELS COMPARED WITH EXACT NONLINEAR EXPRESSION
TEXT -1680 1688 Left 2 ;FIR FILTER COEFFICIENTS FOR\nLTI SMALL-SIGNAL MODEL
TEXT -952 1664 Left 2 ;SYSTEM PARAMS RE-FACTORED\nINTO COMPATIBLE QUANTITIES\nUSED IN C. BASSO RHPZ EQN.
TEXT -1232 -848 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1224 -808 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1224 -784 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT -2128 1816 Left 2 ;DC term "fcg" maintained throughout\nthe discrete model term to see \nDC agreement with conventional \nRHPZ expression
TEXT 960 2104 Left 2 ;INVERSE ZERO-ORDER-HOLD FUNCTION
TEXT -1744 4792 Left 3 ;AVERAGE OUTPUT CURRENT: \nSMALL SIGNAL MODEL
TEXT -1280 2880 Left 2 !;.param mc {Vcg/Lm}\n;.param md {Vdg/Lm}\n;.param dencom {(mc*mc + 2*mc*md + md*md)}\n.param adg {-(1/(2*Tsw))*((2*mc + md)/dencom)}\n.param bdg {(1/(2*Tsw))*((md)/dencom)}\n.param cdg {(1/(Tsw))*((mc)/dencom)}\n.param ddg {(mc*mc)/dencom}\n.param edg {mc*md/dencom}\n.param fdg  {(Tsw/2)*md*mc*mc/dencom}
TEXT -264 4792 Left 3 ;AVERAGE OUTPUT CURRENT: \nEXACT NONLINEAR EXPRESSION
TEXT -1008 4792 Left 3 ;AVERAGE OUTPUT CURRENT: \nCONVENTIONAL SMALL SIGNAL MODEL\n(e.g. CHRISTOPH BASSO)
TEXT -1024 4200 Left 2 !.param Dcdg {Vdg/(Vdg+Vcg)}\n.param Dpdg {1-Dcdg}\n.param wrhpzdg rodg*Dpdg*Dpdg/(Dcdg*Lm)
TEXT -1024 4136 Left 2 !.param Iinfdg {(adg+bdg+cdg)*iv*iv + (ddg+edg)*iv + fdg}\n.param rodg {Vdg/Iinfdg}
TEXT -608 2872 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE\nINDUCTOR CURRENT DISCHARGING SLOPE\nCONVENIENT VARIABLE SUBSTITUTION FOR A DENOMINATOR TERM FOUND IN EVERY COEFFICIENT\nCOEFFICIENT: adg*iv[n]^2\nCOEFFICIENT: bdg*iv[n-1]^2\nCOEFFICIENT: cdg*iv[n]*iv[n-1]\nCOEFFICIENT: ddg*iv[n]\nCOEFFICIENT: edg*iv[n-1]\nCONSTANT   :  fdg, APPEARS IN STEADY-STATE AVERAGE CURRENT COMPUTATION
TEXT -1280 3184 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1280 3744 Left 2 ;AVERAGED CURRENT STEADY STATE OUTPUT
TEXT -1296 5024 Left 2 ;SMALL SIGNAL MODELS COMPARED WITH EXACT NONLINEAR EXPRESSION
TEXT -1744 4344 Left 2 ;FIR FILTER COEFFICIENTS FOR\nLTI SMALL-SIGNAL MODEL
TEXT -1016 4320 Left 2 ;SYSTEM PARAMS RE-FACTORED\nINTO COMPATIBLE QUANTITIES\nUSED IN C. BASSO RHPZ EQN.
TEXT -1312 2704 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1304 2744 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1304 2768 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT -2192 4472 Left 2 ;DC term "fcg" maintained throughout\nthe discrete model term to see \nDC agreement with conventional \nRHPZ expression
TEXT 896 4760 Left 2 ;INVERSE ZERO-ORDER-HOLD FUNCTION
LINE Normal -368 -400 -1216 -400 2
LINE Normal -368 48 -1216 48 2
LINE Normal -368 608 -1216 608 2
LINE Normal -368 1104 -1216 1104 2
LINE Normal -384 2384 -1232 2384 2
LINE Normal 304 -832 -1232 -832 2
LINE Normal -432 3200 -1280 3200 2
LINE Normal -432 3760 -1280 3760 2
LINE Normal -448 5040 -1296 5040 2
LINE Normal 224 2720 -1312 2720 2
