Version 4
SHEET 1 2200 4212
WIRE -1104 176 -1184 176
WIRE -816 176 -896 176
WIRE -1184 240 -1184 176
WIRE -896 240 -896 176
WIRE -1184 384 -1184 320
WIRE -896 384 -896 320
WIRE -1056 768 -1184 768
WIRE -768 768 -896 768
WIRE -1056 880 -1056 768
WIRE -768 880 -768 768
WIRE -1056 1024 -1056 960
WIRE -768 1024 -768 960
WIRE -1680 1344 -1856 1344
WIRE -1376 1344 -1520 1344
WIRE -1680 1456 -1680 1344
WIRE -1376 1456 -1376 1344
WIRE -1680 1600 -1680 1536
WIRE -1376 1600 -1376 1536
WIRE -1424 1792 -1664 1792
WIRE -736 1792 -928 1792
WIRE 32 1792 -176 1792
WIRE 1056 1792 976 1792
WIRE -1664 1904 -1664 1792
WIRE -928 1904 -928 1792
WIRE -176 1904 -176 1792
WIRE 976 1904 976 1792
WIRE -1664 2048 -1664 1984
WIRE -928 2048 -928 1984
WIRE -176 2048 -176 1984
WIRE 976 2048 976 1984
WIRE -992 2736 -1072 2736
WIRE -656 2736 -736 2736
WIRE -1072 2848 -1072 2736
WIRE -736 2848 -736 2736
WIRE -1072 2992 -1072 2928
WIRE -736 2992 -736 2928
WIRE -1008 3184 -1088 3184
WIRE -672 3184 -752 3184
WIRE -1088 3296 -1088 3184
WIRE -752 3296 -752 3184
WIRE -1088 3440 -1088 3376
WIRE -752 3440 -752 3376
FLAG -1424 1792 <idss>
FLAG -1664 2048 0
FLAG -896 768 Ioo
FLAG -768 1024 0
FLAG -1856 1344 A0
FLAG -1680 1600 0
FLAG -1520 1344 A1
FLAG -1376 1600 0
FLAG -1184 384 0
FLAG -1104 176 iv0
FLAG -896 384 0
FLAG -816 176 iv1
FLAG 32 1792 <id>
FLAG -176 2048 0
FLAG -736 1792 <idbasso>
FLAG -928 2048 0
FLAG -1008 3184 i0i1_ex
FLAG -1088 3440 0
FLAG -672 3184 i0i1_ss
FLAG -752 3440 0
FLAG -1056 1024 0
FLAG -1184 768 IooChk
FLAG -992 2736 i0i0_ex
FLAG -1072 2992 0
FLAG -656 2736 i0i0_ss
FLAG -736 2992 0
FLAG 976 2048 0
FLAG 1056 1792 <idss_izoh>
DATAFLAG -832 768 ""
DATAFLAG -1120 768 ""
DATAFLAG -1792 1344 ""
DATAFLAG -1424 1344 ""
DATAFLAG -1616 1792 ""
DATAFLAG -864 1792 ""
DATAFLAG -176 1792 ""
DATAFLAG -720 2736 ""
DATAFLAG -1056 2736 ""
DATAFLAG -1040 3184 ""
DATAFLAG -736 3184 ""
SYMBOL bv -1664 1888 R0
SYMATTR InstName B1
SYMATTR Value V=V(A0)*V(iv0) + V(A1)*V(iv1) + h
SYMBOL bv -768 864 R0
SYMATTR InstName B2
SYMATTR Value V=(c+d+e)*V(iv0)*V(iv0) + (f+g)*V(iv0) + h
SYMBOL bv -1680 1440 R0
SYMATTR InstName B3
SYMATTR Value V=2*c*iv + e*iv + f
SYMBOL bv -1376 1440 R0
SYMATTR InstName B4
SYMATTR Value V=2*d*iv +e*iv + g
SYMBOL voltage -1184 224 R0
WINDOW 123 24 124 Left 2
WINDOW 39 0 0 Left 2
SYMATTR Value2 AC 1
SYMATTR InstName V1
SYMATTR Value {iv}
SYMBOL bv -896 224 R0
SYMATTR InstName B5
SYMATTR Value V=V(iv0) Laplace=exp(-s*Tsw)
SYMBOL bv -176 1888 R0
SYMATTR InstName B6
SYMATTR Value V=c*V(iv0)*V(iv0) + d*V(iv1)*V(iv1) + e*V(iv0)*V(iv1) + f*V(iv0) + g*V(iv1) + h
SYMBOL bv -928 1888 R0
SYMATTR InstName B7
SYMATTR Value V=V(Ioo) Laplace=(1 - s/wrhpz)
SYMBOL bv -1088 3280 R0
SYMATTR InstName B8
SYMATTR Value V=V(iv0)*V(iv1)
SYMBOL bv -752 3280 R0
SYMATTR InstName B9
SYMATTR Value V=iv*(V(iv0) + V(iv1))
SYMBOL bv -1056 864 R0
SYMATTR InstName B10
SYMATTR Value V=Iinf
SYMBOL bv -1072 2832 R0
SYMATTR InstName B11
SYMATTR Value V=V(iv0)*V(iv0)
SYMBOL bv -736 2832 R0
SYMATTR InstName B12
SYMATTR Value V=2*iv*V(iv0)
SYMBOL bv 976 1888 R0
SYMATTR InstName B13
SYMATTR Value V=V(<idss>) Laplace=s*Tsw/(1 - exp(-s*Tsw))
TEXT -1680 2136 Left 3 ;AVERAGE OUTPUT CURRENT: \nSMALL SIGNAL MODEL
TEXT -1216 -664 Left 2 !.param Vin 18.75\n.param Vout 5.25\n.param N 4\n.param Vo {N*Vout}\n.param iv 7.5\n.param Lm 23u\n.param Fsw 130k\n.param Tsw {1/Fsw}
TEXT -1216 -272 Left 2 !.param mc {Vin/Lm}\n.param md {Vo/Lm}\n.param a {1/(mc + md)}\n.param b {Tsw*(1-a*md)}\n.param c {Fsw*(0.5*md*a*a - a)}\n.param d {Fsw*0.5*md*a*a}\n.param e {Fsw*(a - md*a*a)}\n.param f {Fsw*(b - md*a*b)}\n.param g {Fsw*md*a*b}\n.param h {Fsw*0.5*md*b*b}
TEXT -200 2136 Left 3 ;AVERAGE OUTPUT CURRENT: \nEXACT NONLINEAR EXPRESSION
TEXT -1208 552 Left 2 !.ac oct 500 10 {6.1*Fsw}
TEXT -944 2136 Left 3 ;AVERAGE OUTPUT CURRENT: \nCONVENTIONAL SMALL SIGNAL MODEL\n(e.g. CHRISTOPH BASSO)
TEXT -960 1544 Left 2 !.param Dc {Vo/(Vo+Vin)}\n.param Dp {1-Dc}\n.param wrhpz ro*Dp*Dp/(Dc*Lm)
TEXT -960 1480 Left 2 !.param Iinf {(c+d+e)*iv*iv + (f+g)*iv + h}\n.param ro {Vo/Iinf}
TEXT -1096 3064 Left 2 ;CHECK SMALL SIGNAL APPROXIMATION FOR i0^2
TEXT -1096 3504 Left 2 ;CHECK SMALL SIGNAL APPROXIMATION FOR i0*i1
TEXT -920 -664 Left 2 ;INPUT BUS VOLTAGE\nCONVERTER OUTPUT VOLTAGE\nCOUPLED INDUCTOR/TRANSFORMER TURNS RATIO (SECONDARY:PRIMARY)\nOUTPUT VOLTAGE REFLECTED BACK TO THE CONVERTER\nSTEADY-STATE VALLEY CURRRENT\nMAGNETIZING INDUCTANCE\nSWITCHING FREQUENCY\nSWITCHING PERIOD
TEXT -1216 -416 Left 2 ;INPUT PARAMETERS -- SYSTEM STEADY-STATE OPERATING CONDITIONS
TEXT -840 -272 Left 2 ;INDUCTOR CURRENT CHARGING SLOPE\nINDUCTOR CURRENT DISCHARGING SLOPE\nCONVENIENT VARIABLE SUBSTITUTION\nCONVENIENT VARIABLE SUBSTITUTION\nCOEFFICIENT: c*iv[n]^2\nCOEFFICIENT: d*iv[n-1]^2\nCOEFFICIENT: e*iv[n]*iv[n-1]\nCOEFFICIENT: f*iv[n]\nCOEFFICIENT: g*iv[n-1]\nCONSTANT   : h, APPEARS IN STEADY-STATE AVERAGE CURRENT COMPUTATION
TEXT -1216 32 Left 2 ;COMPUTED PARAMETERS -- SYSTEM VARIABLES AND COEFFICIENTS
TEXT -1104 200 Left 2 ;iv[n]
TEXT -816 200 Left 2 ;iv[n-1]
TEXT -1216 592 Left 2 ;SYSTEM INPUT SOURCES
TEXT -1208 456 Left 2 ;STIMULUS GENERATION FOR VALLEY CURRENTS\ni[n] and i[n-1]
TEXT -1216 1088 Left 2 ;AVERAGED CURRENT STEADY STATE OUTPUT
TEXT -1232 2368 Left 2 ;SMALL SIGNAL MODELS COMPARED WITH EXACT NONLINEAR EXPRESSION
TEXT -1672 1664 Left 2 ;FIR FILTER COEFFICIENTS FOR\nLTI SMALL-SIGNAL MODEL
TEXT -952 1664 Left 2 ;SYSTEM PARAMS RE-FACTORED\nINTO COMPATIBLE QUANTITIES\nUSED IN C. BASSO RHPZ EQN.
TEXT -1232 3632 Left 2 ;VERIFICATION OF SMALL SIGNAL GAIN EXPRESSIONS
TEXT -1232 -848 Left 3 ;VERIFICATION OF DISCRETE TIME SMALL SIGNAL ANALYTICAL MODEL FOR SWITCH-MODE INDUCTOR:
TEXT -1224 -808 Left 2 ;TRANSFER FUNCTION OF VALLEY CURRENT TO AVERAGE OUTPUT CURRENT EXPRESSED AS FIR FILTER
TEXT -1224 -784 Left 2 ;COMPARED TO CHRISTOPHE BASSO'S CONTINUOUS-TIME APPROXIMATION OF THE RIGHT-HALF PLANE ZERO
TEXT -2128 1816 Left 2 ;DC term "h" maintained throughout\nthe discrete model term to see \nDC agreement with conventional \nRHPZ expression
TEXT 960 2104 Left 2 ;INVERSE ZERO-ORDER-HOLD FUNCTION
LINE Normal -368 -400 -1216 -400 2
LINE Normal -368 48 -1216 48 2
LINE Normal -368 608 -1216 608 2
LINE Normal -368 1104 -1216 1104 2
LINE Normal -384 2384 -1232 2384 2
LINE Normal -384 3648 -1232 3648 2
LINE Normal 304 -832 -1232 -832 2
